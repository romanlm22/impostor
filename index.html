<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ•µï¸â€â™‚ï¸ Â¿QuiÃ©n es el Impostor? Online</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <div class="container" id="inicio-pantalla">
        <h1>ğŸ•µï¸â€â™‚ï¸ Â¿QuiÃ©n es el Impostor? Online âš½</h1>
        <p>Entra con tu nombre para jugar.</p>

        <div class="opciones">
            <label for="nombre-jugador">Tu Nombre:</label>
            <input type="text" id="nombre-jugador" placeholder="Ej. El Profe">
        </div>

        <hr>

        <h2>Crear Nueva Sala</h2>
        <div class="opciones">
            <label>Selecciona una CategorÃ­a:</label>
            <div class="categorias" id="select-categorias">
                </div>
        </div>
        <button onclick="crearSala()">Crear Sala</button>

        <hr>

        <h2>Unirse a Sala Existente</h2>
        <div class="opciones">
            <label for="codigo-sala-input">CÃ³digo de la Sala:</label>
            <input type="text" id="codigo-sala-input" placeholder="Ej. A1B2C3" maxlength="6">
        </div>
        <button onclick="unirseSala()">Unirse a Sala</button>
    </div>

    <div class="container" id="sala-pantalla" style="display: none;">
        <h2>Sala de Espera ğŸ›‹ï¸</h2>
        <p>CÃ³digo: <span id="codigo-sala-display" class="tema-final">----</span></p>

        <div class="opciones">
            <label>Jugadores en Sala:</label>
            <ul id="lista-jugadores" class="lista-jugadores">
                </ul>
        </div>
        
        <button id="iniciar-juego-btn" onclick="iniciarJuegoHost()" style="display: none;">
            Iniciar Partida (MÃ­nimo 4)
        </button>
        <p class="instruccion">Comparte el cÃ³digo de 6 letras para que tus amigos se unan.</p>
    </div>

    <div class="container" id="rol-pantalla" style="display: none;">
        <h2 id="rol-titulo">Tu Rol es...</h2>
        <div class="card" id="rol-asignado">
            <p class="instruccion">Â¡MÃ­ralo rÃ¡pido y memoriza! Luego el juego comenzarÃ¡ automÃ¡ticamente.</p>
            <h3 id="rol-nombre"></h3>
        </div>
        <p id="cuenta-regresiva-rol">El juego comienza en...</p>
    </div>
    
    <div class="container" id="juego-pantalla" style="display: none;">
        <h2>Â¡A Jugar! â±ï¸</h2>
        <p>El Impostor no conoce el tema. Â¡Discutan, pero no revelen demasiado!</p>
        <h3 id="categoria-revelada" class="tema-final"></h3>
        
        <p class="instruccion">La votaciÃ³n comenzarÃ¡ despuÃ©s de la discusiÃ³n.</p>

        <button id="terminar-juego-btn" onclick="terminarJuego()" style="display: none;">
            Terminar y Votar
        </button>
    </div>

    <div class="container" id="resultado-pantalla" style="display: none;">
        <h2>Resultado de la Partida</h2>
        <p id="mensaje-ganador"></p>
        <p>El tema era: <span id="tema-final-revelado" class="tema-final"></span></p>
        <p>El Impostor era: <span id="impostor-revelado" class="tema-final"></span></p>
        <button onclick="reiniciarJuego()">Volver a la Pantalla Principal</button>
    </div>

    <script src="script.js"></script>
</body>
</html>